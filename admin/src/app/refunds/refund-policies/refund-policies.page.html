<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Refund Policies</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">refund-policies</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content id="content">
    <ion-breadcrumbs>
      <ion-breadcrumb (click)="salesNav()" style="cursor:pointer;">Sales</ion-breadcrumb>
      <ion-breadcrumb>Best Sellers</ion-breadcrumb>
    </ion-breadcrumbs>
    <ion-button id="addRefundmodal">Add New Policy</ion-button>
    <ion-grid>
      <ion-row>
        <ion-col>
          <!--<ion-searchbar show-clear-button="always" (ionInput)="search()" [(ngModel)]="filterTerm" ></ion-searchbar>-->
          Search by date: <ion-input type="date" [(ngModel)]="filterTerm" (change)="searchByDate(filterTerm)"/>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col style="font-weight: bold;">Policy Date</ion-col>
        <ion-col style="font-weight: bold;">Version number</ion-col>
        <ion-col style="font-weight: bold;">Description</ion-col>
      </ion-row>
      <ion-row *ngFor="let item of filteredRefundPolicies">
        <ion-col>{{item.refund_Policy_Date| date: 'yyyy-MM-dd'}}</ion-col>
        <ion-col>{{item.refund_Policy_Version}}</ion-col>
        <ion-col>{{item.refund_Policy_Description}}</ion-col>
        <ion-button (click)="DeleteRefundPolicy(item.refund_Policy_ID)" >Delete</ion-button>
      </ion-row>
    </ion-grid>
  </ion-content>
 
</ion-content>

<!--addmodal-->
<ion-footer> 
  <ion-modal trigger="addRefundmodal" (willDismiss)="onWillDismiss($event)">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button (click)="canceladdmodal()">Cancel</ion-button>
          </ion-buttons>
          <ion-title>Add Refund Policy</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="confirmaddmodal()" [disabled]="AddForm.invalid" [strong]="true">Confirm</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <h3>Add Refund Policy Details</h3>     
        </ion-item>
        <form [formGroup]="AddForm">          
            <ion-item>
              <ion-label position="stacked">Refund Policy Date</ion-label><br>
             <!---<ion-input type="date" formControlName="date" placeholder=""></ion-input>-->
              <ion-input type="date"  formControlName="date" placeholder="" required></ion-input>
            </ion-item>
            <div *ngIf="AddForm.get('date')?.hasError('dateInPast')" class="error-message">
              <p style="color: crimson;">Date cannot be in the past.</p>
            </div>
            <ion-item>
              <ion-label position="stacked">Refund Policy Version</ion-label><br>
              <ion-input type="number" formControlName="version" placeholder="" ></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="stacked">Refund Policy Description</ion-label><br>
              <ion-input type="text" formControlName="description" placeholder=""></ion-input>
            </ion-item>                    
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-footer>